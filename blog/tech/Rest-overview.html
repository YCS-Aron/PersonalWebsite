<div class="blog-body">
    <header class="header">
        <div class="title">
            <h1>Restful API</h1>
            <p class="subline">对Restful API的介绍</p>
            <p class="blog-time"><strong>姚川松</strong> 写于 <strong>2015/7/7</strong></p>
        </div>
    </header>
    <article class="article-content">
        <div>
            <p>API是服务器对外提供的服务接口, 客户端通过调用这些接口使用服务器提供的服务. 一般来说, 服务器端会有<span class="key-word">Resourcec层</span>来处理外来的请求, 根据具体的请求调用不同的<span class="key-word">Service层</span>的服务来处理请求. Resource层区分请求是通过的HTTP协议的<span class="key-word">URL</span>和<span class="key-word">请求方法</span>来区分不同的请求的. Restful API就是一个用来定义HTTP请求的定义规范. 而且它是目前最流行的互联网软件架构.</p>
            <p>在了解Restful api之前, 需要了解下HTTP协议.</p>
            <h2>HTTP协议</h2>
            <p>基于Web的互联网软件大都采用HTTP协议作为通信协议, 而HTTP协议又是采用了<span class="key-word">UDP协议</span>作为传输层协议, 采用什么传输层协议是由其需要的通信质量决定. 基于Web的互联网软件不需要建立持续可靠的链接, 它不需要为建立链接花费时间, 因此HTTP协议是<span class="key-word">无连接</span>的. 正因为HTTP是无链接的, 每个请求都没有一个链接上下文, 所以HTTP协议是<span class="key-word">无状态</span>的, 即协议对于事务处理没有记忆能力, 当发送已经发送过的请求时, HTTP协议会选择重传.</p>
            <h2>HTTP请求</h2>
            <p>基于Web的互联网软件都是基于HTTP请求的, HTTP请求通常由<span class="key-word">URL</span>, <span class="key-word">Headers</span>和<span class="key-word">HTTP方法组成</span>. </p>
            <p>URL由<span class="key-word">主机名(host)</span>和<span class="key-word">路径(path)</span>组成. host通过DNS的解析, 指定了服务器的IP地址, 从而能够找到服务器. 而path则代表了服务器上的一种服务, 或者说是一个资源, 它不一定就是文件在服务器上的路径, 虽然我们在做文件服务时会这么做. 这样我们就可以通过URL定位到具体服务器的某个服务. path中还会包含一些参数, 比较常见的比如有limit, id等. 这些参数也是描述HTTP请求的一部分, 类似于函数参数, 这种方式只适合非敏感数据, 并且只能携带少量数据.</p>
            <p>Headers中包含了其他的描述信息, 比如<span class="key-word">Content</span>是该HTTP请求携带的数据, 在POST时, Content字段是要保存的到服务器上的数据. <span class="key-word">Content-type</span>描述携带的数据的数据类型等等. 有时我们还会自定义一些字段, 添加到Headers中, 这都由设计者根据软件的需要进行设计. </p>
            <p>HTTP方法一般包括<span class="key-word">GET</span>, <span class="key-word">POST</span>, <span class="key-word">PUT</span>, <span class="key-word">DELETE</span>, <span class="key-word">HEAD</span>和<span class="key-word">OPTIONS</span>. 这6种方法可以用来区别HTTP请求. 但是, 在没有规范的情况下, 每种方法的含义是没有定义的. 意思就是我们可以用GET去保存数据, 或者用HEAD去获取数据, 虽然这样做很让人费解, 但是是可行的. Restful API规范就为这些方法的含义进行了定义, 对它们的功能进行了划分. </p>
            <div class="warning">
                <span>状态码也是Restful api定义的吗?</span>
            </div>
            <h2>Restful API规范</h2>
            <p>Restful API规范是了HTTP请求的一个设计规范. 它包括: <span class="key-word">URL的含义和设计方式</span>, <span class="key-word">HTTP方法的含义和功能</span>, <span class="key-word">HTTP请求返回的状态码</span></p>
            <h3>URL的含义和设计方式</h3>
            <p>Restful的全称是Representational State Transfer, 即<span class="key-word">表示层状态转化</span>. 服务器上的每一个资源, 包括文件, 服务, 都有一个独一无二的URI对应, 而URI是资源的实体, 具体资源的表现形式不是确定的, 比如数据可以用XML, 可以用JSON式, 也可以用TXT, 与HTTP请求的Content-Type和Accept字段的内容对应. 表示层状态转化的含义是, 客户端通过HTTP请求, 操作服务器上的数据的状态, 从而让数据的状态发生改变. ?????</p>
            <h3>HTTP方法的含义和功能</h3>
            <ul>
                <li>GET：    从服务器获取数据, 一般会在URL中传递一些描述请求数据的参数.</li>
                <li>POST：   保存数据到服务器, 数据一般是放在Headers中的Content字段的, 然后用Content-Type字段描述数据类型. </li>
                <li>PUT：    更新服务器上的数据, 一般会使用Content和Content-Type字段, 并在URL中传递描述要修改数据的参数.</li>
                <li>DELETE： 删除数据, 用URL参数描述删除数据.</li>
                <li>HEAD：   试探某个HTTP请求是否存在.</li>
                <li>OPTIONS：????.</li>
            </ul>
            <h3>HTTP请求返回的状态码</h3>
            <ul>
                <li>1XX：一些信息状态码, 不表示请求成功或者失败.</li>
                <li>2XX：代表正常, 其中最常见的200表示一切OK.</li>
                <li>3XX：重定向, 比如客户端发送请求给中间层服务器A, 中间层服务器A发现该请求的真正处理逻辑在服务器B上, 那么就需要将请求的host部分改为服务器B的域, 然后转发给服务器B, 这时, 返回的状态就是3XX.</li>
                <li>4XX：客户端错误, 即请求的URL无法解析. 如404表示请求文件未找到.</li>
                <li>5XX：服务器端错误.比如空指针异常等.</li>
            </ul>
            <h3>参考文章</h3>
            <p><strong>Reference: <a onclick="window.open('http://www.ruanyifeng.com/blog/2011/09/restful.html');">理解RESTful架构</a></strong></p>
            <p><strong>Reference: <a onclick="window.open('http://www.ruanyifeng.com/blog/2014/05/restful_api.html');">RESTful API 设计指南</a></strong></p>
            <p><strong>Reference: <a onclick="window.open('https://restful-api-design.readthedocs.org/en/latest/');">Thoughts on RESTful API Design (英文)</a></strong></p>
            <p><strong>Reference: <a onclick="window.open('http://codeplanet.io/principles-good-restful-api-design/');">Principles of good RESTful API Design (英文)</a></strong></p>
            <p><strong>Reference: <a onclick="window.open('https://restful-api-design.readthedocs.org/en/latest/');">Thoughts on RESTful API Design (英文)</a></strong></p>
        </div>
    </article>
</div>